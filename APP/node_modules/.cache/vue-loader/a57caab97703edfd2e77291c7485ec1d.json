{"remainingRequest":"/home/alu/Desktop/DEUCENGFORUM/APP/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alu/Desktop/DEUCENGFORUM/APP/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alu/Desktop/DEUCENGFORUM/APP/src/views/Home.vue","mtime":1580490549479},{"path":"/home/alu/Desktop/DEUCENGFORUM/APP/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alu/Desktop/DEUCENGFORUM/APP/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/alu/Desktop/DEUCENGFORUM/APP/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alu/Desktop/DEUCENGFORUM/APP/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwovLyBpbXBvcnQgSGVsbG9Xb3JsZCBmcm9tICdAL2NvbXBvbmVudHMvSGVsbG9Xb3JsZC52dWUnCi8vIGltcG9ydCBOYXZiYXJQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9OYXZiYXJQYWdlLnZ1ZScKaW1wb3J0IHsKICBtZGJUYmwsCiAgbWRiVGJsSGVhZCwKICBtZGJUYmxCb2R5LAogIG1kYkJ0biwKICBtZGJJbnB1dCwKICBtZGJNb2RhbCwKICBtZGJNb2RhbEhlYWRlciwKICBtZGJNb2RhbFRpdGxlLAogIG1kYk1vZGFsQm9keSwKICBtZGJNb2RhbEZvb3Rlcgp9IGZyb20gJ21kYnZ1ZSc7CmltcG9ydCBKd1BhZ2luYXRpb24gZnJvbSAnanctdnVlLXBhZ2luYXRpb24nOwppbXBvcnQgYXBpIGZyb20gJy4uL2FwaSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2hvbWUnLAogIGNvbXBvbmVudHM6IHsKICAgIG1kYlRibCwKICAgIG1kYlRibEhlYWQsCiAgICBtZGJUYmxCb2R5LAogICAgSndQYWdpbmF0aW9uLAogICAgbWRiQnRuLAogICAgbWRiSW5wdXQsCiAgICBtZGJNb2RhbCwKICAgIG1kYk1vZGFsSGVhZGVyLAogICAgbWRiTW9kYWxUaXRsZSwKICAgIG1kYk1vZGFsQm9keSwKICAgIG1kYk1vZGFsRm9vdGVyCiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1zOiBbCiAgICAgIF0sCiAgICAgIGxhYmVsczogewogICAgICAgIG5leHQ6ICc+JywKICAgICAgICBwcmV2aW91czogJzwnLAogICAgICB9LAogICAgICBwYWdlSXRlbXM6IFtdLAogICAgICBjb250ZW50OiAnJywKICAgICAgdG9waWM6ICcnLAogICAgICBzaG93UG9zdE1vZGFsOiBmYWxzZSwKICAgICAgcG9zdEZvcm1FcnJvcjogJycsCiAgICAgIHBvc3RGb3JtU3VjY2VzczogJycKICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgYXBpLmdldF9wb3N0cyh7fSkKICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmRhdGEuZXJyb3IgPT09IGZhbHNlKSB7CiAgICAgICAgICB0aGlzLml0ZW1zID0gcmVzLmRhdGEuYm9keQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICB9KQogIH0sCiAgbWV0aG9kczogewogICAgb25DaGFuZ2VQYWdlIChwYWdlSXRlbXMpIHsKICAgICAgdGhpcy5wYWdlSXRlbXMgPSBwYWdlSXRlbXMKICAgIH0sCiAgICBjcmVhdGVOZXdUb3BpYyAoKSB7CiAgICAgIGFwaS5jaGVja19hdXRoZW50aWNhdGlvbih7CiAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5lcnJvciA9PT0gZmFsc2UgJiYgcmVzLmRhdGEuYm9keSA9PT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgICAgIHRoaXMuc2hvd1Bvc3RNb2RhbCA9IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCdsb2dpblJlcXVlc3QnKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgY2hlY2tQb3N0Rm9ybSAoKSB7CiAgICAgIHRoaXMudG9waWMgPSB0aGlzLnRvcGljLnRyaW0oKQogICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLmNvbnRlbnQudHJpbSgpCgogICAgICBpZih0aGlzLnRvcGljLmxlbmd0aCA9PT0gMCB8fCB0aGlzLmNvbnRlbnQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5wb3N0Rm9ybUVycm9yID0gJ0VtcHR5IHRvcGljIGFuZCBjb250ZW50IGFyZSBub3QgYWxsb3dlZCEnCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGFwaS5uZXdfcG9zdCh7CiAgICAgICAgdG9waWM6IHRoaXMudG9waWMsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5lcnJvciA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhpcy5wb3N0Rm9ybUVycm9yID0gJycKICAgICAgICAgICAgdGhpcy50b3BpYyA9ICcnCiAgICAgICAgICAgIHRoaXMuY29udGVudCA9ICcnCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcG9zdC8nICsgcmVzLmRhdGEuYm9keS5wb3N0X2lkKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHRoaXMucG9zdEZvcm1FcnJvciA9ICdBbiBlcnJvciBvY2N1cmVkLCB0cnkgYWdhaW4uJwogICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgcHJpbnREYXRlIChpdGVtKSB7CiAgICAgIGlmIChpdGVtLnB1Ymxpc2hlZF9kYXlzX2FnbyAhPT0gMCkgewogICAgICAgIHJldHVybiBpdGVtLnB1Ymxpc2hlZF9kYXlzX2FnbyArICcgZGF5JyArIChpdGVtLnB1Ymxpc2hlZF9kYXlzX2FnbyA+IDEgPyAncycgOiAnJykgKyAnIGFnbycKICAgICAgfQogICAgICBlbHNlIGlmIChpdGVtLnB1Ymxpc2hlZF9ob3Vyc19hZ28gIT09IDApIHsKICAgICAgICByZXR1cm4gaXRlbS5wdWJsaXNoZWRfaG91cnNfYWdvICsgJyBob3VyJyArIChpdGVtLnB1Ymxpc2hlZF9ob3Vyc19hZ28gPiAxID8gJ3MnIDogJycpICsgJyBhZ28nCiAgICAgIH0KICAgICAgZWxzZSBpZiAoaXRlbS5wdWJsaXNoZWRfbWludXRlc19hZ28gIT09IDApIHsKICAgICAgICByZXR1cm4gaXRlbS5wdWJsaXNoZWRfbWludXRlc19hZ28gKyAnIG1pbnV0ZScgKyAoaXRlbS5wdWJsaXNoZWRfbWludXRlc19hZ28gPiAxID8gJ3MnIDogJycpICsgJyBhZ28nCiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucHVibGlzaGVkX3NlY29uZHNfYWdvICsgJyBzZWNvbmQnICsgKGl0ZW0ucHVibGlzaGVkX3NlY29uZHNfYWdvID4gMSA/ICdzJyA6ICcnKSArICcgYWdvJwogICAgICB9CiAgICB9LAogICAgcmVkaXJlY3RQb3N0IChwb3N0X2lkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcG9zdC8nICsgcG9zdF9pZCkKICAgIH0sCiAgICByZWRpcmVjdFVzZXIgKHVzZXJfaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy91c2VyLycgKyB1c2VyX2lkKQogICAgfQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"home\">\n      <mdb-modal centered :show=\"showPostModal\" @close=\"showPostModal = false; postFormError = ''; postFormSuccess = ''\">\n        <mdb-modal-header class=\"text-center\">\n          <mdb-modal-title tag=\"h4\" bold class=\"w-100\">New Post</mdb-modal-title>\n        </mdb-modal-header>\n      <mdb-modal-body class=\"mx-3 grey-text\">\n        <div class=\"text-danger text-center\">{{ this.postFormError }}</div>\n        <div class=\"text-success text-center\">{{ this.postFormSuccess }}</div>\n        <form id=\"postForm\" class=\"needs-validation\" novalidate>\n          <mdb-input v-model=\"topic\" label=\"Topic\" type=\"text\"></mdb-input>\n          <mdb-input v-model=\"content\" label=\"Content\" type=\"textarea\" :rows=\"7\"></mdb-input>\n        </form>\n      </mdb-modal-body>\n      <mdb-modal-footer center>\n        <mdb-btn @click.native=\"checkPostForm\" gradient=\"blue\">Send Post</mdb-btn>\n      </mdb-modal-footer>\n    </mdb-modal>\n    <div class=\"container-fluid\">\n    <div class=\"row\">\n      <div class=\"col-md-3\"/>\n      <div class=\"col-md-6\">\n        <div class=\"card-body\">\n          <div class=\"text-right\">\n            <mdbBtn gradient=\"blue\" icon=\"plus\" size=\"sm\" mdbWavesEffect @click.native=\"createNewTopic\">New Post</mdbBtn>\n          </div>\n          <div class=\"table-responsive\">\n            <mdb-tbl hover :pagination = \"true\">\n              <!--Table head-->\n              <mdb-tbl-head>\n                <tr>\n                  <th class=\"text-left\">Post</th>\n                  <th class=\"text-center\">Writer</th>\n                  <th class=\"text-center\">Views</th>\n                  <th class=\"text-center\">Answers</th>\n                </tr>\n              </mdb-tbl-head>\n              <!--Table head-->\n              <!--Table body-->\n              <mdb-tbl-body>\n                <tr v-for=\"(item, index) in pageItems\" v-bind:key=\"index\">\n                  <td class=\"text-left\">\n                    <a v-on:click=\"redirectPost(item.post_id)\" class=\"font-weight-bold blue-text\">{{ item.topic }}</a>\n                    <div>\n                      <strong>{{ item.author }}</strong>\n                      <span>{{ printDate(item) }}</span>\n                    </div>\n                  </td>\n                  <td class=\"text-center\">{{ item.username }}</td>\n                  <td class=\"text-center\">{{ item.view }}</td>\n                  <td class=\"text-center\">{{ item.answer }}</td>\n                </tr>\n              </mdb-tbl-body>\n              <!--Table body-->\n            </mdb-tbl>\n          </div>\n          <div class=\"card-footer pb-0 pt-3 text-center\">\n            <jw-pagination :items=\"items\" @changePage=\"onChangePage\" :labels=\"labels\"></jw-pagination>\n        </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n// import HelloWorld from '@/components/HelloWorld.vue'\n// import NavbarPage from '@/components/NavbarPage.vue'\nimport {\n  mdbTbl,\n  mdbTblHead,\n  mdbTblBody,\n  mdbBtn,\n  mdbInput,\n  mdbModal,\n  mdbModalHeader,\n  mdbModalTitle,\n  mdbModalBody,\n  mdbModalFooter\n} from 'mdbvue';\nimport JwPagination from 'jw-vue-pagination';\nimport api from '../api';\n\nexport default {\n  name: 'home',\n  components: {\n    mdbTbl,\n    mdbTblHead,\n    mdbTblBody,\n    JwPagination,\n    mdbBtn,\n    mdbInput,\n    mdbModal,\n    mdbModalHeader,\n    mdbModalTitle,\n    mdbModalBody,\n    mdbModalFooter\n  },\n  data () {\n    return {\n      items: [\n      ],\n      labels: {\n        next: '>',\n        previous: '<',\n      },\n      pageItems: [],\n      content: '',\n      topic: '',\n      showPostModal: false,\n      postFormError: '',\n      postFormSuccess: ''\n    }\n  },\n  mounted () {\n    api.get_posts({})\n      .then(res => {\n        if (res.data.error === false) {\n          this.items = res.data.body\n        }\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  },\n  methods: {\n    onChangePage (pageItems) {\n      this.pageItems = pageItems\n    },\n    createNewTopic () {\n      api.check_authentication({\n      })\n        .then(res => {\n          if (res.data.error === false && res.data.body === \"success\") {\n            this.showPostModal = true\n          }\n        })\n        .catch(err => {\n          if (err) {\n            this.$root.$emit('loginRequest')\n          }\n        })\n    },\n    checkPostForm () {\n      this.topic = this.topic.trim()\n      this.content = this.content.trim()\n\n      if(this.topic.length === 0 || this.content.length === 0) {\n        this.postFormError = 'Empty topic and content are not allowed!'\n        return\n      }\n\n      api.new_post({\n        topic: this.topic,\n        content: this.content\n      })\n        .then(res => {\n          if (res.data.error === false) {\n            this.postFormError = ''\n            this.topic = ''\n            this.content = ''\n            this.$router.push('/post/' + res.data.body.post_id)\n          }\n        })\n        .catch(err => {\n          if (err) {\n            this.postFormError = 'An error occured, try again.'\n          }\n        })\n    },\n    printDate (item) {\n      if (item.published_days_ago !== 0) {\n        return item.published_days_ago + ' day' + (item.published_days_ago > 1 ? 's' : '') + ' ago'\n      }\n      else if (item.published_hours_ago !== 0) {\n        return item.published_hours_ago + ' hour' + (item.published_hours_ago > 1 ? 's' : '') + ' ago'\n      }\n      else if (item.published_minutes_ago !== 0) {\n        return item.published_minutes_ago + ' minute' + (item.published_minutes_ago > 1 ? 's' : '') + ' ago'\n      }\n      else {\n        return item.published_seconds_ago + ' second' + (item.published_seconds_ago > 1 ? 's' : '') + ' ago'\n      }\n    },\n    redirectPost (post_id) {\n      this.$router.push('/post/' + post_id)\n    },\n    redirectUser (user_id) {\n      this.$router.push('/user/' + user_id)\n    }\n  }\n}\n</script>\n"]}]}